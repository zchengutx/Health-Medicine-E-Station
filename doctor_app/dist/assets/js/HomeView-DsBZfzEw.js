/* empty css              *//* empty css              */import{u as e,a as s,_ as a}from"./_plugin-vue_export-helper-DHCoCbLt.js";import"./index-C696E_os.js";import{k as o,r as t,b as n,A as i,G as l,I as r,u as c,H as u,j as p,U as d,C as m,M as v}from"./vue-Djwh67vz.js";import{s as f,B as g}from"./vant-DqFfTfyr.js";const y={class:"home-view"},_={class:"home-content"},h={class:"welcome-section"},x={key:0,class:"user-info"},j={class:"action-buttons"},k=a(o({__name:"HomeView",setup(a){const o=e(),k=s(),I=t(!1),b=()=>{o.logout(),f({message:"已退出登录",type:"success"}),k.toLogin()},w=()=>{k.toLogin()},L=()=>{return e=this,s=null,a=function*(){I.value=!0;try{const e=yield o.refreshUserInfo();f(e?{message:"用户信息已更新",type:"success"}:{message:"刷新失败，请重试",type:"fail"})}catch(e){f({message:"刷新失败，请重试",type:"fail"})}finally{I.value=!1}},new Promise((o,t)=>{var n=e=>{try{l(a.next(e))}catch(s){t(s)}},i=e=>{try{l(a.throw(e))}catch(s){t(s)}},l=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,i);l((a=a.apply(e,s)).next())});var e,s,a};return n(()=>{if(o.isLoggedIn)return o.checkTokenExpiry()?void 0:(f({message:"登录已过期，请重新登录",type:"fail"}),void k.toLogin());k.toLogin()}),(e,s)=>{const a=g;return m(),i("div",y,[l("div",_,[l("div",h,[s[0]||(s[0]=l("h1",null,"主页",-1)),s[1]||(s[1]=l("p",null,"欢迎使用优医医生版",-1)),c(o).doctorInfo?(m(),i("div",x,[l("p",null,"欢迎您，"+u(c(o).doctorName),1),l("p",null,"手机号："+u(c(o).doctorInfo.Phone),1),l("p",null,"状态："+u(c(o).doctorInfo.Status),1)])):r("",!0)]),l("div",j,[p(a,{type:"primary",size:"large",onClick:L,loading:I.value,class:"action-button"},{default:d(()=>s[2]||(s[2]=[v(" 刷新用户信息 ",-1)])),_:1,__:[2]},8,["loading"]),p(a,{type:"warning",size:"large",onClick:b,class:"action-button"},{default:d(()=>s[3]||(s[3]=[v(" 退出登录 ",-1)])),_:1,__:[3]}),p(a,{size:"large",onClick:w,class:"action-button"},{default:d(()=>s[4]||(s[4]=[v(" 重新登录 ",-1)])),_:1,__:[4]})])])])}}}),[["__scopeId","data-v-3129cb10"]]);export{k as default};
