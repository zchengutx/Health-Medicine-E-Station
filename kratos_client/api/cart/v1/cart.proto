syntax = "proto3";

package api.cart.v1;

import "google/api/annotations.proto";

option go_package = "kratos_client/api/cart/v1;v1";
option java_multiple_files = true;
option java_package = "api.cart.v1";

service Cart {
	rpc CreateCart (CreateCartRequest) returns (CreateCartReply){
		option (google.api.http) = {
			post: "/v1/cart/create"
			body: "*"
		};
	};
	rpc UpdateCart (UpdateCartRequest) returns (UpdateCartReply){
		option (google.api.http) = {
			post: "/v1/cart/update"
			body: "*"
		};
	};
	rpc DeleteCart (DeleteCartRequest) returns (DeleteCartReply){
		option (google.api.http) = {
			post: "/v1/cart/delete"
			body: "*"
		};
	};
	rpc ListCart (ListCartRequest) returns (ListCartReply){
		option (google.api.http) = {
			post: "/v1/cart/list"
			body: "*"
		};
	};
}

message CreateCartRequest {
	int64 user_id = 1;
	int64 drug_id = 2;
	int64 number = 3;
}
message CreateCartReply {
	int64 code = 1;
	string msg = 2;
}

message UpdateCartRequest {
	int64 user_id = 1;
	int64 drug_id = 2;
	int64 number = 3;
}
message UpdateCartReply {
	int64 code = 1;
	string msg = 2;
}

message DeleteCartRequest {
	int64 user_id = 1;
	repeated int64 drug_ids = 2; // 支持批量删除，传入多个药品ID
}
message DeleteCartReply {
	int64 code = 1;
	string msg = 2;
}

message GetCartRequest {
	int64 id = 1;
}

message ListCartRequest {
	int64 user_id = 1;
}
message ListCartReply {
	int64 code = 1;
	string msg = 2;
	repeated InfoCart cart = 3;
}
message InfoCart {
	int64 id = 1;
	int64 user_id = 2;
	int64 drug_id = 3;
	int64 number = 4;
	string drug_name = 5;
	string specification = 6;
	double price = 7;
	int64 inventory = 8;
	string exhibition_url = 9;
}